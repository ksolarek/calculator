<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>


<body>
    <div id="calculator-container">
        <div id="display"></div>
        <div class="buttons">
            <div class="function-buttons">
                <button id="ac-btn">AC</button>
                <button id="c-btn">C</button>
            </div>
            <div class="numbers">
                <button id="seven-btn">7</button>
                <button id="eight-btn">8</button>
                <button id="nine-btn">9</button>
            </div>
            <div class="numbers">
                <button id="four-btn">4</button>
                <button id="five-btn">5</button>
                <button id="six-btn">6</button>
            </div>
            <div class="numbers">
                <button id="one-btn">1</button>
                <button id="two-btn">2</button>
                <button id="three-btn">3</button>
            </div>
            <div class="numbers"></div>
                <button id="zero-btn">0</button>
                <button id="point-btn">.</button>
                <button id="equals-btn">=</button>
            </div>
        </div>
            <div class="operators"></div>
            <button id="dividedBy-btn">÷</button>
            <button id="times-btn">x</button>
            <button id="minus-btn">-</button>
            <button id="plus-btn">+</button>
        </div>
    </div>
</body>



<script>

    function add(a, b) {
        return a + b;
    };

    function subtract(a, b) {
        return a - b;
    };

    function multiply(a, b) {
        return a * b;
    };

    function divide(a, b) {
        return a / b;
    };

    let num1 ="";
    let num2 = "";
    let operator = "";
    let result = "";

    function operate() {
        if (operator === "+") {
            return result = add(+num1, +num2);
        } else if (operator === "-") {
            return result = subtract(+num1, +num2);
        } else if (operator === "*") {
            return result = multiply(+num1, +num2);
        } else if (operator === "/") {
            if (+num2 === 0) {
                alert("Pamiętaj, cholero, nigdy nie dziel przez zero!");
            } else {
                if (!Number.isInteger(divide(+num1, +num2))) {
                    let n = divide(+num1, +num2).toFixed(6);
                    return result = parseFloat(n);
                } else {
                    return result = divide(+num1, +num2);
                }
            };
        };
    };

    const calculatorContainer = document.querySelector("#calculator-container");
    const display = document.querySelector("#display");
    const acBtn = document.querySelector("#ac-btn");
    const cBtn = document.querySelector("#c-btn");
    const pointBtn = document.querySelector("#point-btn");
    const zeroBtn = document.querySelector("#zero-btn");
    const oneBtn = document.querySelector("#one-btn");
    const twoBtn = document.querySelector("#two-btn");
    const threeBtn = document.querySelector("#three-btn");
    const fourBtn = document.querySelector("#four-btn");
    const fiveBtn = document.querySelector("#five-btn");
    const sixBtn = document.querySelector("#six-btn");
    const sevenBtn = document.querySelector("#seven-btn");
    const eightBtn = document.querySelector("#eight-btn");
    const nineBtn = document.querySelector("#nine-btn");
    const plusBtn = document.querySelector("#plus-btn");
    const minusBtn = document.querySelector("#minus-btn");
    const timesBtn = document.querySelector("#times-btn");
    const dividedByBtn = document.querySelector("#dividedBy-btn");
    const equalsBtn = document.querySelector("#equals-btn");

    display.textContent = "0";

    // tu zaczynam kombinowac

    document.addEventListener("keydown", function(e) {
        switch(e.key) {
            case "0":
                pressNumber("0");
                break;
            case "1": 
                pressNumber("1");
                break;
            case "2": 
                pressNumber("2");
                break;
            case "3":
                pressNumber("3");
                break;
            case "4":
                pressNumber("4");
                break;
            case "5":
                pressNumber("5");
                break;
            case "6":
                pressNumber("6");
                break;
            case "7":
                pressNumber("7");
                break;
            case "8":
                pressNumber("8");
                break;
            case "9":
                pressNumber("9");
                break;
            case ".":
                pressPoint();
                break;
            case "c":
                pressC();
                break;
            case "Backspace":
                pressC();
                break;
            case "Delete":
                pressC();
                break;
            case "Escape": 
                pressAc();
                break;
            case "+":
                pressOperator("+");
                break;
            case "-":
                pressOperator("-");
                break;
            case "*":
                pressOperator("*");
                break;
            case "/":
                pressOperator("/");
                break;
            case "*":
                pressOperator("*");
                break;
            case "Enter":
                pressEquals();
                break;
            case "=":
                pressEquals();
                break;
        };
    });

    document.addEventListener("keydown", function(e) {
        switch(e.code) {
            case "NumpadAdd":
                pressOperator("+");
                break;
            case "NumpadSubtract":
                pressOperator("-");
                break;
            case "NumpadMultiply":
                pressOperator("*");
                break;
            case "NumpadDivide":
                pressOperator("/");
                break;
        }
    });


    // tu koncze

    acBtn.addEventListener("click", () => pressAc());

    cBtn.addEventListener("click", () => pressC());

    function pressAc() {
        num1 ="";
        num2 = "";
        operator = "";
        lastOperator = "";
        lastNum2 = "";
        display.textContent = "0";
    };
 
    function pressC() {
        if (operator === "") {
            num1 = "";
            display.textContent = "0";
        } else if (num2 !== "") {
            num2 = "";
            display.textContent = "0";
        } else {
            display.textContent = "0";
        };
        lastOperator = "";
        lastNum2 = "";
    };

    function pressPoint() {
        if (display.textContent.includes(".")) {
            return;
        } else {
            if (operator === "") {
                num1 += ".";
                lastOperator = "";
                lastNum2 = "";
                display.textContent = num1;
            } else {
                num2 += ".";
                display.textContent = num2;
            };
        };
    };

    function pressNumber(n) {
        if (operator === "") {
            num1 += n;
            lastOperator = "";
            lastNum2 = "";
            display.textContent = num1;
        } else {
            num2 += n;
            display.textContent = num2;
        };
    };

    pointBtn.addEventListener("click", () => pressPoint());

    zeroBtn.addEventListener("click", () => pressNumber("0"));

    oneBtn.addEventListener("click", () => pressNumber("1"));

    twoBtn.addEventListener("click", () => pressNumber("2"));

    threeBtn.addEventListener("click", () => pressNumber("3"));

    fourBtn.addEventListener("click", () => pressNumber("4"));

    fiveBtn.addEventListener("click", () => pressNumber("5"));

    sixBtn.addEventListener("click", () => pressNumber("6"));

    sevenBtn.addEventListener("click", () => pressNumber("7"));

    eightBtn.addEventListener("click", () => pressNumber("8"));

    nineBtn.addEventListener("click", () => pressNumber("9"));

    function pressOperator(op) {
        if (operator === "") {
            operator = op;
        } else {
            operate();
            operator = op;
            display.textContent = result;
            num1 = result;
            num2 = "";
        };
    };

    function pressEquals() {
        if (num2 === "") {
            if (lastOperator !== "") {
                num1 = result;
                num2 = lastNum2;
                operator = lastOperator;
            } else {
             return;
            };
        };
        operate();
        display.textContent = result;
        lastNum2 = num2;
        lastOperator = operator;
        num1 = result;
        num2 = "";
        operator = "";
    };

    plusBtn.addEventListener("click", () => pressOperator("+"));

    minusBtn.addEventListener("click", () => pressOperator("-"));

    timesBtn.addEventListener("click", () => pressOperator("*"));

    dividedByBtn.addEventListener("click", () => pressOperator("/"));

    let lastOperator = "";
    let lastNum2 = "";

    equalsBtn.addEventListener("click", () => pressEquals());


</script>

</html>